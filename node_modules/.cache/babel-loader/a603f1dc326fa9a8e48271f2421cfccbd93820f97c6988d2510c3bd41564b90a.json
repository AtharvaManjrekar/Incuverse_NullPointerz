{"ast":null,"code":"var _jsxFileName = \"D:\\\\CollegeFolder_B-TECH\\\\Incuverse\\\\src\\\\pages\\\\Registration.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { createUserWithEmailAndPassword, sendEmailVerification, onAuthStateChanged, signOut, signInWithEmailAndPassword } from 'firebase/auth';\nimport { auth } from '../firebaseConfig';\nimport { addData } from './firestore';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Registration = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    setUser,\n    setUserData\n  } = useAuth();\n  const [currentStep, setCurrentStep] = useState(1);\n  const [formData, setFormData] = useState({\n    // Personal Information\n    firstName: '',\n    lastName: '',\n    email: '',\n    age: '',\n    location: '',\n    maritalStatus: '',\n    dependents: '',\n    // Income & Security\n    monthlyIncome: '',\n    password: '',\n    confirmPassword: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [isEmailVerified, setIsEmailVerified] = useState(false);\n  const [isCreatingAccount, setIsCreatingAccount] = useState(false);\n  const [verificationSent, setVerificationSent] = useState(false);\n  const [checkInterval, setCheckInterval] = useState(null);\n  const [isCheckingVerification, setIsCheckingVerification] = useState(false);\n  const [tempUserCredentials, setTempUserCredentials] = useState(null);\n\n  // Monitor email verification status\n  useEffect(() => {\n    if (verificationSent && !isEmailVerified) {\n      const interval = setInterval(async () => {\n        try {\n          // Since user is signed out, we can't check verification status automatically\n          // The user will need to use the \"Check Verification\" button manually\n          console.log('Email verification monitoring active - use manual check button');\n        } catch (error) {\n          console.log('Error checking verification status:', error);\n        }\n      }, 2000); // Check every 2 seconds\n\n      setCheckInterval(interval);\n\n      // Cleanup interval on component unmount\n      return () => {\n        if (interval) {\n          clearInterval(interval);\n        }\n      };\n    }\n  }, [verificationSent, isEmailVerified]);\n\n  // Cleanup interval when email is verified\n  useEffect(() => {\n    if (isEmailVerified && checkInterval) {\n      clearInterval(checkInterval);\n      setCheckInterval(null);\n    }\n  }, [isEmailVerified, checkInterval]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n  const validateStep = step => {\n    const newErrors = {};\n    let isValid = true;\n    if (step === 1) {\n      if (!formData.firstName.trim()) {\n        newErrors.firstName = 'First Name is required';\n        isValid = false;\n      }\n      if (!formData.lastName.trim()) {\n        newErrors.lastName = 'Last Name is required';\n        isValid = false;\n      }\n      if (!formData.email.trim()) {\n        newErrors.email = 'Email is required';\n        isValid = false;\n      } else if (!/\\S+@\\S+\\.\\S/.test(formData.email)) {\n        newErrors.email = 'Email is invalid';\n        isValid = false;\n      }\n      if (!formData.password.trim()) {\n        newErrors.password = 'Password is required';\n        isValid = false;\n      } else if (formData.password.length < 6) {\n        newErrors.password = 'Password must be at least 6 characters';\n        isValid = false;\n      }\n      if (formData.password !== formData.confirmPassword) {\n        newErrors.confirmPassword = 'Passwords do not match';\n        isValid = false;\n      }\n      if (!formData.age.trim()) {\n        newErrors.age = 'Age is required';\n        isValid = false;\n      } else if (isNaN(formData.age) || parseInt(formData.age) < 18) {\n        newErrors.age = 'Age must be a number and at least 18';\n        isValid = false;\n      }\n      if (!formData.location.trim()) {\n        newErrors.location = 'Location is required';\n        isValid = false;\n      }\n      if (!formData.maritalStatus.trim()) {\n        newErrors.maritalStatus = 'Marital Status is required';\n        isValid = false;\n      }\n      if (!formData.dependents.trim()) {\n        newErrors.dependents = 'Number of Dependents is required';\n        isValid = false;\n      } else if (isNaN(formData.dependents) || parseInt(formData.dependents) < 0) {\n        newErrors.dependents = 'Dependents must be a non-negative number';\n        isValid = false;\n      }\n    } else if (step === 2) {\n      if (!formData.monthlyIncome.trim()) {\n        newErrors.monthlyIncome = 'Monthly Income is required';\n        isValid = false;\n      } else if (isNaN(formData.monthlyIncome) || parseFloat(formData.monthlyIncome) <= 0) {\n        newErrors.monthlyIncome = 'Monthly Income must be a positive number';\n        isValid = false;\n      }\n    }\n    setErrors(newErrors);\n    return isValid;\n  };\n  const handleNextStep = async () => {\n    if (validateStep(currentStep)) {\n      if (currentStep === 1) {\n        // Ensure email is verified before proceeding to step 2\n        if (!isEmailVerified) {\n          alert('Please verify your email before proceeding to the next step.');\n          return;\n        }\n        console.log('âœ… Moving to Step 2, email verified:', isEmailVerified);\n        setIsAnimating(true);\n        setTimeout(() => {\n          setCurrentStep(2);\n          setIsAnimating(false);\n        }, 300);\n      }\n    }\n  };\n  const handlePreviousStep = () => {\n    setIsAnimating(true);\n    setTimeout(() => {\n      setCurrentStep(1);\n      setIsAnimating(false);\n    }, 300);\n  };\n  const handleEmailVerification = async () => {\n    if (!formData.email || !formData.password) {\n      setErrors(prev => ({\n        ...prev,\n        email: \"Email and password are required.\"\n      }));\n      return;\n    }\n    setIsCreatingAccount(true);\n    setErrors({});\n    try {\n      // Create user with REAL password - PRODUCTION READY\n      const userCredential = await createUserWithEmailAndPassword(auth, formData.email, formData.password);\n      const user = userCredential.user;\n\n      // Set display name (with error handling)\n      try {\n        if (user && typeof user.updateProfile === 'function') {\n          await user.updateProfile({\n            displayName: `${formData.firstName} ${formData.lastName}`\n          });\n          console.log(\"âœ… Display name set successfully\");\n        } else {\n          console.log(\"âš ï¸ updateProfile method not available, skipping display name update\");\n          // Store display name in localStorage as fallback\n          localStorage.setItem('userDisplayName', `${formData.firstName} ${formData.lastName}`);\n        }\n      } catch (profileError) {\n        console.log(\"âš ï¸ Profile update failed, continuing with verification:\", profileError);\n        // Store display name in localStorage as fallback\n        localStorage.setItem('userDisplayName', `${formData.firstName} ${formData.lastName}`);\n      }\n\n      // Send verification email\n      await sendEmailVerification(user);\n      console.log(\"âœ… Verification email sent successfully to:\", formData.email);\n      setVerificationSent(true);\n\n      // Store user credentials temporarily for verification checking\n      setTempUserCredentials({\n        email: formData.email,\n        password: formData.password\n      });\n\n      // Sign out the user immediately after sending verification email\n      // This prevents the navbar from showing logged-in state during registration\n      try {\n        await signOut(auth);\n        setUser(null);\n        setUserData(null);\n        console.log(\"âœ… User signed out after sending verification email\");\n      } catch (signOutError) {\n        console.log(\"âš ï¸ Sign out failed after verification email:\", signOutError);\n        // Still clear AuthContext state\n        setUser(null);\n        setUserData(null);\n      }\n      alert(`Verification email sent to ${formData.email}. Please check your email and click the verification link to continue.`);\n    } catch (error) {\n      setIsCreatingAccount(false);\n      let errorMessage = 'Failed to create account. Please try again.';\n      switch (error.code) {\n        case 'auth/email-already-in-use':\n          errorMessage = 'This email is already in use. Please login or use a different email.';\n          break;\n        case 'auth/invalid-email':\n          errorMessage = 'The email address is invalid.';\n          break;\n        case 'auth/weak-password':\n          errorMessage = 'The password is too weak. Please use a stronger password.';\n          break;\n        default:\n          errorMessage = error.message;\n      }\n      setErrors(prev => ({\n        ...prev,\n        email: errorMessage\n      }));\n      console.error(\"Firebase registration error:\", error);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (validateStep(currentStep)) {\n      try {\n        console.log(\"Form submitted:\", formData);\n\n        // Get current user\n        const user = auth.currentUser;\n        if (!user) {\n          alert(\"Please complete email verification first!\");\n          return;\n        }\n\n        // Prepare data for Firestore\n        const userData = {\n          userId: user.uid,\n          email: user.email,\n          emailVerified: user.emailVerified,\n          firstName: formData.firstName,\n          lastName: formData.lastName,\n          age: parseInt(formData.age),\n          location: formData.location,\n          maritalStatus: formData.maritalStatus,\n          dependents: parseInt(formData.dependents),\n          monthlyIncome: parseFloat(formData.monthlyIncome),\n          password: formData.password,\n          createdAt: new Date(),\n          updatedAt: new Date()\n        };\n\n        // Store data in Firestore\n        try {\n          console.log(\"ðŸ” Storing user data in Firestore:\", userData);\n          const result = await addData('users', userData);\n          console.log(\"ðŸ” Firestore result:\", result);\n          if (result.success) {\n            console.log(\"âœ… User data stored successfully in Firestore:\", result.id);\n\n            // Sign out the user after successful registration\n            try {\n              await signOut(auth);\n              // Also clear AuthContext state manually\n              setUser(null);\n              setUserData(null);\n              console.log(\"âœ… User signed out after registration\");\n            } catch (signOutError) {\n              console.log(\"âš ï¸ Sign out failed, but registration was successful:\", signOutError);\n              // Still clear AuthContext state even if signOut fails\n              setUser(null);\n              setUserData(null);\n            }\n            alert(\"Registration successful! Please login to continue.\");\n            navigate(\"/login\");\n          } else {\n            throw new Error(result.error);\n          }\n        } catch (firestoreError) {\n          console.error(\"âŒ Firestore error:\", firestoreError);\n          alert(\"Registration completed but data storage failed. Please try again.\");\n        }\n      } catch (error) {\n        console.error(\"Error during registration:\", error);\n        alert(\"An error occurred during registration. Please try again.\");\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-screen flex flex-col justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card w-full p-6 shadow-lg border rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-user-plus text-primary-600 text-2xl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-gray-900 mb-2\",\n          children: \"Create Your Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Join us to plan your perfect retirement\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: `transition-all duration-300 ${isAnimating ? 'opacity-0 transform translate-x-4' : 'opacity-100 transform translate-x-0'}`,\n        children: [currentStep === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold text-gray-900 mb-4\",\n            children: \"Personal Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"First Name *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"firstName\",\n                value: formData.firstName,\n                onChange: handleChange,\n                className: `form-input ${errors.firstName ? 'border-red-500' : ''}`,\n                placeholder: \"Enter your first name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 37\n              }, this), errors.firstName && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: errors.firstName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 58\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Last Name *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"lastName\",\n                value: formData.lastName,\n                onChange: handleChange,\n                className: `form-input ${errors.lastName ? 'border-red-500' : ''}`,\n                placeholder: \"Enter your last name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 37\n              }, this), errors.lastName && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: errors.lastName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 57\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Email Address *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              name: \"email\",\n              value: formData.email,\n              onChange: handleChange,\n              className: `form-input ${errors.email ? 'border-red-500' : ''}`,\n              placeholder: \"Enter your email address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 33\n            }, this), errors.email && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-sm mt-1\",\n              children: errors.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 50\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Password *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              name: \"password\",\n              value: formData.password,\n              onChange: handleChange,\n              className: `form-input ${errors.password ? 'border-red-500' : ''}`,\n              placeholder: \"Create a strong password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 33\n            }, this), errors.password && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-sm mt-1\",\n              children: errors.password\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 53\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Confirm Password *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              name: \"confirmPassword\",\n              value: formData.confirmPassword,\n              onChange: handleChange,\n              className: `form-input ${errors.confirmPassword ? 'border-red-500' : ''}`,\n              placeholder: \"Confirm your password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 33\n            }, this), errors.confirmPassword && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-sm mt-1\",\n              children: errors.confirmPassword\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 60\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Age *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                name: \"age\",\n                value: formData.age,\n                onChange: handleChange,\n                className: `form-input ${errors.age ? 'border-red-500' : ''}`,\n                placeholder: \"Your current age\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 37\n              }, this), errors.age && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: errors.age\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 52\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Location *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"location\",\n                value: formData.location,\n                onChange: handleChange,\n                className: `form-input ${errors.location ? 'border-red-500' : ''}`,\n                placeholder: \"Your city or region\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 37\n              }, this), errors.location && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: errors.location\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 57\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Marital Status *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"maritalStatus\",\n                value: formData.maritalStatus,\n                onChange: handleChange,\n                className: `form-select ${errors.maritalStatus ? 'border-red-500' : ''}`,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 458,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"single\",\n                  children: \"Single\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"married\",\n                  children: \"Married\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"divorced\",\n                  children: \"Divorced\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"widowed\",\n                  children: \"Widowed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 37\n              }, this), errors.maritalStatus && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: errors.maritalStatus\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 62\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Number of Dependents *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                name: \"dependents\",\n                value: formData.dependents,\n                onChange: handleChange,\n                className: `form-input ${errors.dependents ? 'border-red-500' : ''}`,\n                placeholder: \"E.g., 0, 1, 2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 37\n              }, this), errors.dependents && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-sm mt-1\",\n                children: errors.dependents\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 59\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleEmailVerification,\n              disabled: isCreatingAccount || isEmailVerified || !formData.email || !formData.password,\n              className: `w-full px-4 py-2 rounded-lg text-sm font-medium transition-colors ${isEmailVerified ? 'bg-green-100 text-green-700 border border-green-300' : isCreatingAccount ? 'bg-gray-100 text-gray-500 border border-gray-300 cursor-not-allowed' : 'bg-primary-600 text-white hover:bg-primary-700'}`,\n              children: isCreatingAccount ? 'Sending...' : isEmailVerified ? 'Verified âœ“' : 'Send Verification Email'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 29\n          }, this), verificationSent && !isEmailVerified && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 p-4 bg-blue-50 border border-blue-200 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-envelope text-blue-600 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 502,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-blue-800 font-medium\",\n                    children: \"Verification email sent!\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 503,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 501,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-blue-600 mb-2\",\n                  children: \"Please check your email and click the verification link to continue.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-blue-500\",\n                  children: \"After clicking the link, come back here and click \\\"Check Verification\\\" below.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 506,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: async () => {\n                  setIsCheckingVerification(true);\n                  try {\n                    if (tempUserCredentials) {\n                      // Sign in temporarily to check verification status\n                      const userCredential = await signInWithEmailAndPassword(auth, tempUserCredentials.email, tempUserCredentials.password);\n                      const user = userCredential.user;\n                      if (user.emailVerified) {\n                        console.log('âœ… Email verified!');\n                        setIsEmailVerified(true);\n                        alert('âœ… Email verified successfully! You can now continue.');\n\n                        // Sign out again to maintain the logged-out state\n                        await signOut(auth);\n                        setUser(null);\n                        setUserData(null);\n                      } else {\n                        console.log('Email not verified yet');\n                        alert('Email not verified yet. Please check your email and click the verification link.');\n\n                        // Sign out after checking\n                        await signOut(auth);\n                        setUser(null);\n                        setUserData(null);\n                      }\n                    } else {\n                      alert('Verification credentials not available. Please try sending the verification email again.');\n                    }\n                  } catch (error) {\n                    console.error('Error checking verification:', error);\n                    alert('Error checking verification. Please try again.');\n                  } finally {\n                    setIsCheckingVerification(false);\n                  }\n                },\n                disabled: isCheckingVerification,\n                className: `px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center ${isCheckingVerification ? 'bg-gray-400 text-gray-200 cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700 shadow-md'}`,\n                children: isCheckingVerification ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-spinner fa-spin mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 558,\n                    columnNumber: 53\n                  }, this), \"Checking...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-check-circle mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 563,\n                    columnNumber: 53\n                  }, this), \"Check Verification\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 33\n          }, this), isEmailVerified && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-check-circle text-green-600 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-green-800 font-medium\",\n                children: \"Email verified successfully! You can now proceed to the next step.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleNextStep,\n            disabled: !isEmailVerified,\n            className: `w-full py-3 px-4 rounded-lg text-lg font-semibold transition-colors duration-200 flex items-center justify-center ${!isEmailVerified ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-primary-600 text-white hover:bg-primary-700 shadow-md'}`,\n            children: !isEmailVerified ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-envelope mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 41\n              }, this), \"Verify Email to Continue\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\"Next Step\", /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-arrow-right ml-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 598,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 25\n        }, this), currentStep === 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold text-gray-900 mb-4\",\n            children: \"Income & Security\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 29\n          }, this), console.log('Step 2 - isEmailVerified:', isEmailVerified), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Monthly Income (\\u20B9) *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"monthlyIncome\",\n              value: formData.monthlyIncome,\n              onChange: handleChange,\n              className: `form-input ${errors.monthlyIncome ? 'border-red-500' : ''}`,\n              placeholder: \"Enter your gross monthly income\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 614,\n              columnNumber: 33\n            }, this), errors.monthlyIncome && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-500 text-sm mt-1\",\n              children: errors.monthlyIncome\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 622,\n              columnNumber: 58\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 612,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handlePreviousStep,\n              className: \"btn-secondary py-2 px-4 rounded-md text-lg font-semibold transition-colors duration-200\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-arrow-left mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 631,\n                columnNumber: 37\n              }, this), \" Previous\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 626,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn-primary py-2 px-4 rounded-md text-lg font-semibold transition-colors duration-200\",\n              children: [\"Register \", /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-check-circle ml-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 46\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600\",\n          children: [\"Already have an account?\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/login\",\n            className: \"font-medium text-primary-600 hover:text-primary-500\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 647,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 341,\n    columnNumber: 9\n  }, this);\n};\n_s(Registration, \"9NrN9Pa0GIFg8HD7eUqhdhSz59Y=\", false, function () {\n  return [useNavigate, useAuth];\n});\n_c = Registration;\nexport default Registration;\nvar _c;\n$RefreshReg$(_c, \"Registration\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","createUserWithEmailAndPassword","sendEmailVerification","onAuthStateChanged","signOut","signInWithEmailAndPassword","auth","addData","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","Registration","_s","navigate","setUser","setUserData","currentStep","setCurrentStep","formData","setFormData","firstName","lastName","email","age","location","maritalStatus","dependents","monthlyIncome","password","confirmPassword","errors","setErrors","isAnimating","setIsAnimating","isEmailVerified","setIsEmailVerified","isCreatingAccount","setIsCreatingAccount","verificationSent","setVerificationSent","checkInterval","setCheckInterval","isCheckingVerification","setIsCheckingVerification","tempUserCredentials","setTempUserCredentials","interval","setInterval","console","log","error","clearInterval","handleChange","e","name","value","target","prev","validateStep","step","newErrors","isValid","trim","test","length","isNaN","parseInt","parseFloat","handleNextStep","alert","setTimeout","handlePreviousStep","handleEmailVerification","userCredential","user","updateProfile","displayName","localStorage","setItem","profileError","signOutError","errorMessage","code","message","handleSubmit","preventDefault","currentUser","userData","userId","uid","emailVerified","createdAt","Date","updatedAt","result","success","id","Error","firestoreError","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange","placeholder","onClick","disabled","href","_c","$RefreshReg$"],"sources":["D:/CollegeFolder_B-TECH/Incuverse/src/pages/Registration.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    createUserWithEmailAndPassword,\r\n    sendEmailVerification,\r\n    onAuthStateChanged,\r\n    signOut,\r\n    signInWithEmailAndPassword,\r\n} from 'firebase/auth';\r\nimport { auth } from '../firebaseConfig';\r\nimport { addData } from './firestore';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nconst Registration = () => {\r\n    const navigate = useNavigate();\r\n    const { setUser, setUserData } = useAuth();\r\n    const [currentStep, setCurrentStep] = useState(1);\r\n    const [formData, setFormData] = useState({\r\n        // Personal Information\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        age: '',\r\n        location: '',\r\n        maritalStatus: '',\r\n        dependents: '',\r\n        // Income & Security\r\n        monthlyIncome: '',\r\n        password: '',\r\n        confirmPassword: ''\r\n    });\r\n    const [errors, setErrors] = useState({});\r\n    const [isAnimating, setIsAnimating] = useState(false);\r\n    const [isEmailVerified, setIsEmailVerified] = useState(false);\r\n    const [isCreatingAccount, setIsCreatingAccount] = useState(false);\r\n    const [verificationSent, setVerificationSent] = useState(false);\r\n    const [checkInterval, setCheckInterval] = useState(null);\r\n    const [isCheckingVerification, setIsCheckingVerification] = useState(false);\r\n    const [tempUserCredentials, setTempUserCredentials] = useState(null);\r\n\r\n    // Monitor email verification status\r\n    useEffect(() => {\r\n        if (verificationSent && !isEmailVerified) {\r\n            const interval = setInterval(async () => {\r\n                try {\r\n                    // Since user is signed out, we can't check verification status automatically\r\n                    // The user will need to use the \"Check Verification\" button manually\r\n                    console.log('Email verification monitoring active - use manual check button');\r\n                } catch (error) {\r\n                    console.log('Error checking verification status:', error);\r\n                }\r\n            }, 2000); // Check every 2 seconds\r\n\r\n            setCheckInterval(interval);\r\n\r\n            // Cleanup interval on component unmount\r\n            return () => {\r\n                if (interval) {\r\n                    clearInterval(interval);\r\n                }\r\n            };\r\n        }\r\n    }, [verificationSent, isEmailVerified]);\r\n\r\n    // Cleanup interval when email is verified\r\n    useEffect(() => {\r\n        if (isEmailVerified && checkInterval) {\r\n            clearInterval(checkInterval);\r\n            setCheckInterval(null);\r\n        }\r\n    }, [isEmailVerified, checkInterval]);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n        if (errors[name]) {\r\n            setErrors(prev => ({\r\n                ...prev,\r\n                [name]: ''\r\n            }));\r\n        }\r\n    };\r\n\r\n    const validateStep = (step) => {\r\n        const newErrors = {};\r\n        let isValid = true;\r\n\r\n        if (step === 1) {\r\n            if (!formData.firstName.trim()) {\r\n                newErrors.firstName = 'First Name is required';\r\n                isValid = false;\r\n            }\r\n            if (!formData.lastName.trim()) {\r\n                newErrors.lastName = 'Last Name is required';\r\n                isValid = false;\r\n            }\r\n            if (!formData.email.trim()) {\r\n                newErrors.email = 'Email is required';\r\n                isValid = false;\r\n            } else if (!/\\S+@\\S+\\.\\S/.test(formData.email)) {\r\n                newErrors.email = 'Email is invalid';\r\n                isValid = false;\r\n            }\r\n            if (!formData.password.trim()) {\r\n                newErrors.password = 'Password is required';\r\n                isValid = false;\r\n            } else if (formData.password.length < 6) {\r\n                newErrors.password = 'Password must be at least 6 characters';\r\n                isValid = false;\r\n            }\r\n            if (formData.password !== formData.confirmPassword) {\r\n                newErrors.confirmPassword = 'Passwords do not match';\r\n                isValid = false;\r\n            }\r\n            if (!formData.age.trim()) {\r\n                newErrors.age = 'Age is required';\r\n                isValid = false;\r\n            } else if (isNaN(formData.age) || parseInt(formData.age) < 18) {\r\n                newErrors.age = 'Age must be a number and at least 18';\r\n                isValid = false;\r\n            }\r\n            if (!formData.location.trim()) {\r\n                newErrors.location = 'Location is required';\r\n                isValid = false;\r\n            }\r\n            if (!formData.maritalStatus.trim()) {\r\n                newErrors.maritalStatus = 'Marital Status is required';\r\n                isValid = false;\r\n            }\r\n            if (!formData.dependents.trim()) {\r\n                newErrors.dependents = 'Number of Dependents is required';\r\n                isValid = false;\r\n            } else if (isNaN(formData.dependents) || parseInt(formData.dependents) < 0) {\r\n                newErrors.dependents = 'Dependents must be a non-negative number';\r\n                isValid = false;\r\n            }\r\n        } else if (step === 2) {\r\n            if (!formData.monthlyIncome.trim()) {\r\n                newErrors.monthlyIncome = 'Monthly Income is required';\r\n                isValid = false;\r\n            } else if (isNaN(formData.monthlyIncome) || parseFloat(formData.monthlyIncome) <= 0) {\r\n                newErrors.monthlyIncome = 'Monthly Income must be a positive number';\r\n                isValid = false;\r\n            }\r\n        }\r\n\r\n        setErrors(newErrors);\r\n        return isValid;\r\n    };\r\n\r\n    const handleNextStep = async () => {\r\n        if (validateStep(currentStep)) {\r\n            if (currentStep === 1) {\r\n                // Ensure email is verified before proceeding to step 2\r\n                if (!isEmailVerified) {\r\n                    alert('Please verify your email before proceeding to the next step.');\r\n                    return;\r\n                }\r\n\r\n                console.log('âœ… Moving to Step 2, email verified:', isEmailVerified);\r\n                setIsAnimating(true);\r\n                setTimeout(() => {\r\n                    setCurrentStep(2);\r\n                    setIsAnimating(false);\r\n                }, 300);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handlePreviousStep = () => {\r\n        setIsAnimating(true);\r\n        setTimeout(() => {\r\n            setCurrentStep(1);\r\n            setIsAnimating(false);\r\n        }, 300);\r\n    };\r\n\r\n    const handleEmailVerification = async () => {\r\n        if (!formData.email || !formData.password) {\r\n            setErrors((prev) => ({\r\n                ...prev,\r\n                email: \"Email and password are required.\",\r\n            }));\r\n            return;\r\n        }\r\n\r\n        setIsCreatingAccount(true);\r\n        setErrors({});\r\n\r\n        try {\r\n            // Create user with REAL password - PRODUCTION READY\r\n            const userCredential = await createUserWithEmailAndPassword(\r\n                auth,\r\n                formData.email,\r\n                formData.password\r\n            );\r\n            const user = userCredential.user;\r\n\r\n            // Set display name (with error handling)\r\n            try {\r\n                if (user && typeof user.updateProfile === 'function') {\r\n                    await user.updateProfile({\r\n                        displayName: `${formData.firstName} ${formData.lastName}`\r\n                    });\r\n                    console.log(\"âœ… Display name set successfully\");\r\n                } else {\r\n                    console.log(\"âš ï¸ updateProfile method not available, skipping display name update\");\r\n                    // Store display name in localStorage as fallback\r\n                    localStorage.setItem('userDisplayName', `${formData.firstName} ${formData.lastName}`);\r\n                }\r\n            } catch (profileError) {\r\n                console.log(\"âš ï¸ Profile update failed, continuing with verification:\", profileError);\r\n                // Store display name in localStorage as fallback\r\n                localStorage.setItem('userDisplayName', `${formData.firstName} ${formData.lastName}`);\r\n            }\r\n\r\n            // Send verification email\r\n            await sendEmailVerification(user);\r\n            console.log(\"âœ… Verification email sent successfully to:\", formData.email);\r\n            setVerificationSent(true);\r\n\r\n            // Store user credentials temporarily for verification checking\r\n            setTempUserCredentials({\r\n                email: formData.email,\r\n                password: formData.password\r\n            });\r\n\r\n            // Sign out the user immediately after sending verification email\r\n            // This prevents the navbar from showing logged-in state during registration\r\n            try {\r\n                await signOut(auth);\r\n                setUser(null);\r\n                setUserData(null);\r\n                console.log(\"âœ… User signed out after sending verification email\");\r\n            } catch (signOutError) {\r\n                console.log(\"âš ï¸ Sign out failed after verification email:\", signOutError);\r\n                // Still clear AuthContext state\r\n                setUser(null);\r\n                setUserData(null);\r\n            }\r\n\r\n            alert(`Verification email sent to ${formData.email}. Please check your email and click the verification link to continue.`);\r\n\r\n        } catch (error) {\r\n            setIsCreatingAccount(false);\r\n            let errorMessage = 'Failed to create account. Please try again.';\r\n            switch (error.code) {\r\n                case 'auth/email-already-in-use':\r\n                    errorMessage = 'This email is already in use. Please login or use a different email.';\r\n                    break;\r\n                case 'auth/invalid-email':\r\n                    errorMessage = 'The email address is invalid.';\r\n                    break;\r\n                case 'auth/weak-password':\r\n                    errorMessage = 'The password is too weak. Please use a stronger password.';\r\n                    break;\r\n                default:\r\n                    errorMessage = error.message;\r\n            }\r\n            setErrors(prev => ({\r\n                ...prev,\r\n                email: errorMessage\r\n            }));\r\n            console.error(\"Firebase registration error:\", error);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (validateStep(currentStep)) {\r\n            try {\r\n                console.log(\"Form submitted:\", formData);\r\n\r\n                // Get current user\r\n                const user = auth.currentUser;\r\n                if (!user) {\r\n                    alert(\"Please complete email verification first!\");\r\n                    return;\r\n                }\r\n\r\n                // Prepare data for Firestore\r\n                const userData = {\r\n                    userId: user.uid,\r\n                    email: user.email,\r\n                    emailVerified: user.emailVerified,\r\n                    firstName: formData.firstName,\r\n                    lastName: formData.lastName,\r\n                    age: parseInt(formData.age),\r\n                    location: formData.location,\r\n                    maritalStatus: formData.maritalStatus,\r\n                    dependents: parseInt(formData.dependents),\r\n                    monthlyIncome: parseFloat(formData.monthlyIncome),\r\n                    password: formData.password,\r\n                    createdAt: new Date(),\r\n                    updatedAt: new Date()\r\n                };\r\n\r\n                // Store data in Firestore\r\n                try {\r\n                    console.log(\"ðŸ” Storing user data in Firestore:\", userData);\r\n                    const result = await addData('users', userData);\r\n                    console.log(\"ðŸ” Firestore result:\", result);\r\n\r\n                    if (result.success) {\r\n                        console.log(\"âœ… User data stored successfully in Firestore:\", result.id);\r\n\r\n                        // Sign out the user after successful registration\r\n                        try {\r\n                            await signOut(auth);\r\n                            // Also clear AuthContext state manually\r\n                            setUser(null);\r\n                            setUserData(null);\r\n                            console.log(\"âœ… User signed out after registration\");\r\n                        } catch (signOutError) {\r\n                            console.log(\"âš ï¸ Sign out failed, but registration was successful:\", signOutError);\r\n                            // Still clear AuthContext state even if signOut fails\r\n                            setUser(null);\r\n                            setUserData(null);\r\n                        }\r\n\r\n                        alert(\"Registration successful! Please login to continue.\");\r\n                        navigate(\"/login\");\r\n                    } else {\r\n                        throw new Error(result.error);\r\n                    }\r\n                } catch (firestoreError) {\r\n                    console.error(\"âŒ Firestore error:\", firestoreError);\r\n                    alert(\"Registration completed but data storage failed. Please try again.\");\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error during registration:\", error);\r\n                alert(\"An error occurred during registration. Please try again.\");\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-screen flex flex-col justify-center\">\r\n            <div className=\"card w-full p-6 shadow-lg border rounded-lg\">\r\n                <div className=\"text-center mb-6\">\r\n                    <div className=\"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                        <i className=\"fas fa-user-plus text-primary-600 text-2xl\"></i>\r\n                    </div>\r\n                    <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Create Your Account</h1>\r\n                    <p className=\"text-gray-600\">Join us to plan your perfect retirement</p>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} className={`transition-all duration-300 ${isAnimating ? 'opacity-0 transform translate-x-4' : 'opacity-100 transform translate-x-0'}`}>\r\n                    {currentStep === 1 && (\r\n                        <div className=\"space-y-6\">\r\n                            <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Personal Information</h2>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"form-label\">First Name *</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"firstName\"\r\n                                        value={formData.firstName}\r\n                                        onChange={handleChange}\r\n                                        className={`form-input ${errors.firstName ? 'border-red-500' : ''}`}\r\n                                        placeholder=\"Enter your first name\"\r\n                                    />\r\n                                    {errors.firstName && <p className=\"text-red-500 text-sm mt-1\">{errors.firstName}</p>}\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"form-label\">Last Name *</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"lastName\"\r\n                                        value={formData.lastName}\r\n                                        onChange={handleChange}\r\n                                        className={`form-input ${errors.lastName ? 'border-red-500' : ''}`}\r\n                                        placeholder=\"Enter your last name\"\r\n                                    />\r\n                                    {errors.lastName && <p className=\"text-red-500 text-sm mt-1\">{errors.lastName}</p>}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"form-label\">Email Address *</label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    name=\"email\"\r\n                                    value={formData.email}\r\n                                    onChange={handleChange}\r\n                                    className={`form-input ${errors.email ? 'border-red-500' : ''}`}\r\n                                    placeholder=\"Enter your email address\"\r\n                                />\r\n                                {errors.email && <p className=\"text-red-500 text-sm mt-1\">{errors.email}</p>}\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"form-label\">Password *</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    name=\"password\"\r\n                                    value={formData.password}\r\n                                    onChange={handleChange}\r\n                                    className={`form-input ${errors.password ? 'border-red-500' : ''}`}\r\n                                    placeholder=\"Create a strong password\"\r\n                                />\r\n                                {errors.password && <p className=\"text-red-500 text-sm mt-1\">{errors.password}</p>}\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"form-label\">Confirm Password *</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    name=\"confirmPassword\"\r\n                                    value={formData.confirmPassword}\r\n                                    onChange={handleChange}\r\n                                    className={`form-input ${errors.confirmPassword ? 'border-red-500' : ''}`}\r\n                                    placeholder=\"Confirm your password\"\r\n                                />\r\n                                {errors.confirmPassword && <p className=\"text-red-500 text-sm mt-1\">{errors.confirmPassword}</p>}\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"form-label\">Age *</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        name=\"age\"\r\n                                        value={formData.age}\r\n                                        onChange={handleChange}\r\n                                        className={`form-input ${errors.age ? 'border-red-500' : ''}`}\r\n                                        placeholder=\"Your current age\"\r\n                                    />\r\n                                    {errors.age && <p className=\"text-red-500 text-sm mt-1\">{errors.age}</p>}\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"form-label\">Location *</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"location\"\r\n                                        value={formData.location}\r\n                                        onChange={handleChange}\r\n                                        className={`form-input ${errors.location ? 'border-red-500' : ''}`}\r\n                                        placeholder=\"Your city or region\"\r\n                                    />\r\n                                    {errors.location && <p className=\"text-red-500 text-sm mt-1\">{errors.location}</p>}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"form-label\">Marital Status *</label>\r\n                                    <select\r\n                                        name=\"maritalStatus\"\r\n                                        value={formData.maritalStatus}\r\n                                        onChange={handleChange}\r\n                                        className={`form-select ${errors.maritalStatus ? 'border-red-500' : ''}`}\r\n                                    >\r\n                                        <option value=\"\">Select status</option>\r\n                                        <option value=\"single\">Single</option>\r\n                                        <option value=\"married\">Married</option>\r\n                                        <option value=\"divorced\">Divorced</option>\r\n                                        <option value=\"widowed\">Widowed</option>\r\n                                    </select>\r\n                                    {errors.maritalStatus && <p className=\"text-red-500 text-sm mt-1\">{errors.maritalStatus}</p>}\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"form-label\">Number of Dependents *</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        name=\"dependents\"\r\n                                        value={formData.dependents}\r\n                                        onChange={handleChange}\r\n                                        className={`form-input ${errors.dependents ? 'border-red-500' : ''}`}\r\n                                        placeholder=\"E.g., 0, 1, 2\"\r\n                                    />\r\n                                    {errors.dependents && <p className=\"text-red-500 text-sm mt-1\">{errors.dependents}</p>}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"mt-4\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handleEmailVerification}\r\n                                    disabled={isCreatingAccount || isEmailVerified || !formData.email || !formData.password}\r\n                                    className={`w-full px-4 py-2 rounded-lg text-sm font-medium transition-colors ${isEmailVerified\r\n                                        ? 'bg-green-100 text-green-700 border border-green-300'\r\n                                        : isCreatingAccount\r\n                                            ? 'bg-gray-100 text-gray-500 border border-gray-300 cursor-not-allowed'\r\n                                            : 'bg-primary-600 text-white hover:bg-primary-700'\r\n                                        }`}\r\n                                >\r\n                                    {isCreatingAccount ? 'Sending...' : isEmailVerified ? 'Verified âœ“' : 'Send Verification Email'}\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Email Verification Status */}\r\n                            {verificationSent && !isEmailVerified && (\r\n                                <div className=\"mt-3 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <div className=\"flex-1\">\r\n                                            <div className=\"flex items-center mb-2\">\r\n                                                <i className=\"fas fa-envelope text-blue-600 mr-2\"></i>\r\n                                                <p className=\"text-sm text-blue-800 font-medium\">Verification email sent!</p>\r\n                                            </div>\r\n                                            <p className=\"text-xs text-blue-600 mb-2\">Please check your email and click the verification link to continue.</p>\r\n                                            <p className=\"text-xs text-blue-500\">After clicking the link, come back here and click \"Check Verification\" below.</p>\r\n                                        </div>\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            onClick={async () => {\r\n                                                setIsCheckingVerification(true);\r\n                                                try {\r\n                                                    if (tempUserCredentials) {\r\n                                                        // Sign in temporarily to check verification status\r\n                                                        const userCredential = await signInWithEmailAndPassword(\r\n                                                            auth,\r\n                                                            tempUserCredentials.email,\r\n                                                            tempUserCredentials.password\r\n                                                        );\r\n                                                        const user = userCredential.user;\r\n\r\n                                                        if (user.emailVerified) {\r\n                                                            console.log('âœ… Email verified!');\r\n                                                            setIsEmailVerified(true);\r\n                                                            alert('âœ… Email verified successfully! You can now continue.');\r\n\r\n                                                            // Sign out again to maintain the logged-out state\r\n                                                            await signOut(auth);\r\n                                                            setUser(null);\r\n                                                            setUserData(null);\r\n                                                        } else {\r\n                                                            console.log('Email not verified yet');\r\n                                                            alert('Email not verified yet. Please check your email and click the verification link.');\r\n\r\n                                                            // Sign out after checking\r\n                                                            await signOut(auth);\r\n                                                            setUser(null);\r\n                                                            setUserData(null);\r\n                                                        }\r\n                                                    } else {\r\n                                                        alert('Verification credentials not available. Please try sending the verification email again.');\r\n                                                    }\r\n                                                } catch (error) {\r\n                                                    console.error('Error checking verification:', error);\r\n                                                    alert('Error checking verification. Please try again.');\r\n                                                } finally {\r\n                                                    setIsCheckingVerification(false);\r\n                                                }\r\n                                            }}\r\n                                            disabled={isCheckingVerification}\r\n                                            className={`px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center ${isCheckingVerification\r\n                                                ? 'bg-gray-400 text-gray-200 cursor-not-allowed'\r\n                                                : 'bg-blue-600 text-white hover:bg-blue-700 shadow-md'\r\n                                                }`}\r\n                                        >\r\n                                            {isCheckingVerification ? (\r\n                                                <>\r\n                                                    <i className=\"fas fa-spinner fa-spin mr-2\"></i>\r\n                                                    Checking...\r\n                                                </>\r\n                                            ) : (\r\n                                                <>\r\n                                                    <i className=\"fas fa-check-circle mr-2\"></i>\r\n                                                    Check Verification\r\n                                                </>\r\n                                            )}\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {isEmailVerified && (\r\n                                <div className=\"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg\">\r\n                                    <div className=\"flex items-center\">\r\n                                        <i className=\"fas fa-check-circle text-green-600 mr-2\"></i>\r\n                                        <p className=\"text-sm text-green-800 font-medium\">Email verified successfully! You can now proceed to the next step.</p>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={handleNextStep}\r\n                                disabled={!isEmailVerified}\r\n                                className={`w-full py-3 px-4 rounded-lg text-lg font-semibold transition-colors duration-200 flex items-center justify-center ${!isEmailVerified\r\n                                    ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                                    : 'bg-primary-600 text-white hover:bg-primary-700 shadow-md'\r\n                                    }`}\r\n                            >\r\n                                {!isEmailVerified ? (\r\n                                    <>\r\n                                        <i className=\"fas fa-envelope mr-2\"></i>\r\n                                        Verify Email to Continue\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        Next Step\r\n                                        <i className=\"fas fa-arrow-right ml-2\"></i>\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n\r\n                    {currentStep === 2 && (\r\n                        <div className=\"space-y-6\">\r\n                            <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Income & Security</h2>\r\n                            \r\n                            {/* Debug info - remove in production */}\r\n                            {console.log('Step 2 - isEmailVerified:', isEmailVerified)}\r\n\r\n                            <div>\r\n                                <label className=\"form-label\">Monthly Income (â‚¹) *</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    name=\"monthlyIncome\"\r\n                                    value={formData.monthlyIncome}\r\n                                    onChange={handleChange}\r\n                                    className={`form-input ${errors.monthlyIncome ? 'border-red-500' : ''}`}\r\n                                    placeholder=\"Enter your gross monthly income\"\r\n                                />\r\n                                {errors.monthlyIncome && <p className=\"text-red-500 text-sm mt-1\">{errors.monthlyIncome}</p>}\r\n                            </div>\r\n\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handlePreviousStep}\r\n                                    className=\"btn-secondary py-2 px-4 rounded-md text-lg font-semibold transition-colors duration-200\"\r\n                                >\r\n                                    <i className=\"fas fa-arrow-left mr-2\"></i> Previous\r\n                                </button>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"btn-primary py-2 px-4 rounded-md text-lg font-semibold transition-colors duration-200\"\r\n                                >\r\n                                    Register <i className=\"fas fa-check-circle ml-2\"></i>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </form>\r\n\r\n                <div className=\"mt-6 text-center\">\r\n                    <p className=\"text-sm text-gray-600\">\r\n                        Already have an account?{' '}\r\n                        <a href=\"/login\" className=\"font-medium text-primary-600 hover:text-primary-500\">\r\n                            Login\r\n                        </a>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Registration;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}